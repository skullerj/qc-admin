<script>
const statsSearch = (state,action)=>{
  switch (action.case) {
    case 'LOAD_STATS':
      return Object.assign({},state.stats,action.stats);
      break;
    default:
      return state;
  }
}
const userSearch = (state,action)=>{
  switch (action.type) {
    case 'LOAD_USERS':
      return Object.assign({},state,{entities:action.users});
      break;
    case 'UPDATE_USER':
      var newSelectedUser=Object.assign({},state.selectedUser);
      var newEntities = state.entities.reduce((res,user)=>{
        if(user.id===action.id){
          user= Object.assign({},user,action.updates);
          newSelectedUser=user;
        }
        return res.push(user);
      },[]);
      return Object.assign({},state,{entities:newEntities,selectedUser:newSelectedUser});
      break;
    case 'SELECT_USER':
      var newSelected = state.entities.reduce((res,user)=>{
        if(user.id===action.id){
          res=user;
        }
        return res;
      },state.selectedUser);
      return Object.assign({},state,{selectedUser:newSelected});
      break;
    default:
      return state;
  }
}


const search=(state,action)=>{
  return {
    stats:statsSearch(state.stats,action),
    users:userSearch(state.users,action)
  }  
}


</script>
